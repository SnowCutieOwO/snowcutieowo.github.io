import{_ as p,c as h,al as t,j as i,a,G as l,w as e,B as k,o as d}from"./chunks/framework.D-_8_VyS.js";const r="/assets/image5.BT-k1Wna.png",F=JSON.parse('{"title":"🔄 动态定价","description":"","frontmatter":{},"headers":[],"relativePath":"UltimateShop/dynamic-prices.dynamic-price.md","filePath":"UltimateShop/dynamic-prices.dynamic-price.md"}'),o={name:"UltimateShop/dynamic-prices.dynamic-price.md"};function E(g,s,c,y,u,m){const n=k("font");return d(),h("div",null,[s[10]||(s[10]=t(`<h1 id="🔄-动态定价" tabindex="-1">🔄 动态定价 <a class="header-anchor" href="#🔄-动态定价" aria-label="Permalink to &quot;🔄 动态定价&quot;">​</a></h1><h2 id="启用数学功能" tabindex="-1">启用数学功能 <a class="header-anchor" href="#启用数学功能" aria-label="Permalink to &quot;启用数学功能&quot;">​</a></h2><p>修改 config.yml 文件下的这些内容：</p><ul><li>对于 1.2.8 的用户：将 <code>check-math: false</code> 改为 <code>check-math: true</code>。</li><li>对于 1.2.9+ 的用户：见下</li></ul><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">math</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 是否启用基本数学运算检测?</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 仅对 + - * / 四种运算符进行识别.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enabld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><p>修改为</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">math</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 是否启用基本数学运算检测?</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 仅对 + - * / 四种运算符进行识别.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p>即可。</p><ul><li>将：</li></ul><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    can-used-in-amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><p>修改为</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    can-used-in-amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h2 id="在物品配置中设置动态值" tabindex="-1">在物品配置中设置动态值 <a class="header-anchor" href="#在物品配置中设置动态值" aria-label="Permalink to &quot;在物品配置中设置动态值&quot;">​</a></h2><p>打开你的商店配置，找到你需要启用动态定价的商品。</p><p>例如，我想为该商品启用：</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    display-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;自定义名称!&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    price-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ALL</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    product-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CLASSIC_ALL</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    products</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        material</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sea_lantern</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    buy-prices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        economy-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">exp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;5+({buy-times-server}-{sell-times-server})*0.2&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        max-amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        min-amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        start-apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{amount} 经验值&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    sell-prices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        economy-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">exp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;5+({buy-times-server}-{sell-times-server})*0.2&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        max-amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        min-amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        start-apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{amount} 经验值&#39;</span></span></code></pre></div><p>首先，你需要将 <code>price-mode</code> 设置为 <code>ALL</code> 或 <code>ANY</code>。</p><p>我在这里写的部分数量设置是数学表达式，如果你数学不好的话就让我给你解释：</p><ul><li>5 为价格基数，即起始价格；</li><li>0.2 表示玩家每次交易后的加价，价格会随之变动。</li><li>我们也添加了诸如 <code>max-amount</code> 和 <code>min-amount</code> 选项，以防止价格变动幅度过大的情况出现。</li></ul><p>这里设置的公式不作限制，但你需要谨慎设置，否则玩家有可能会出现借此刷取货币的情况。因此，<code>max-amount</code> 和 <code>min-amount</code> 是非常重要的。例如，你可以设置：</p><ul><li>买价公式：<code>2.8+{buy-times-server}*0.1-{sell-times-server}*0.06</code></li><li>卖价公式：<code>2.38+{buy-times-server}*0.1-{sell-times-server}*0.06</code></li></ul>`,21)),i("p",null,[s[1]||(s[1]=a("因此，你的 ")),s[2]||(s[2]=i("code",null,"max-amount",-1)),s[3]||(s[3]=a(" 选项应当小于第 ")),l(n,{color:"red"},{default:e(()=>s[0]||(s[0]=[i("strong",null,"n",-1)])),_:1}),s[4]||(s[4]=a(" 次交易的价格。"))]),s[11]||(s[11]=i("p",null,"那么，如何获得这个数字？很简单，它必须满足：",-1)),s[12]||(s[12]=i("p",null,[i("code",null,"(购买基础价 - 出售基础价) / (购买最高价 - 出售最低价) >= 1+2+...+n")],-1)),i("p",null,[s[6]||(s[6]=a("在这个实例中，即：(2.8-2.38)/(0.1-0.06) >= 1+2+3+4 ，即本示例中的 ")),l(n,{color:"red"},{default:e(()=>s[5]||(s[5]=[a("n")])),_:1}),s[7]||(s[7]=a(" 为 4。"))]),i("p",null,[s[9]||(s[9]=a("需要注意的是：")),l(n,{color:"red"},{default:e(()=>s[8]||(s[8]=[a("不同的计算公式需要设置不同的 "),i("code",null,"max-amount",-1),a(" 和 "),i("code",null,"min-amount",-1),a("。最安全的方法就是将交易价格修改为相同值。")])),_:1})]),s[13]||(s[13]=t('<p><img src="'+r+'" alt="img"></p><p>另一个普通的动态定价公式即为基于百分比修改价格，如：<code>100 * (1.5 ^ ({buy-times-server}-{sell-times-server}))</code>。在本示例中：</p><ul><li><strong>100</strong> 为基础价格。</li><li><strong>1.5</strong> 为交易后价格倍率。</li><li>在本示例中，第一次只买不卖为 <strong>100</strong>，之后是 <strong>150（+50%）</strong>，之后是 <strong>225（150+150*50%）</strong>。</li><li>不要忘了设置 <code>min-amount</code> 为接近 <strong>100</strong> 的数，以防止价格过低！</li></ul><h2 id="单玩家动态定价" tabindex="-1">单玩家动态定价 <a class="header-anchor" href="#单玩家动态定价" aria-label="Permalink to &quot;单玩家动态定价&quot;">​</a></h2><p>只要你可以确保在公式中使用的变量随玩家变化而变化，计算的价格自然也会如此。在上文的示例中，我们使用了诸如 <code>{buy-times-server}</code>，你只需要将 <code>server</code> 替换为 <code>player</code> 即可显示玩家自己的购买价格。相关内容也在“<a href="./placeholders.built-in-placeholder.html">变量</a>”中有所解释。</p><h2 id="为物品设置交易限制" tabindex="-1">为物品设置交易限制 <a class="header-anchor" href="#为物品设置交易限制" aria-label="Permalink to &quot;为物品设置交易限制&quot;">​</a></h2><p>见“<a href="./shops.products.html">物品</a>”章节获取信息及示例。</p><h2 id="重置动态定价" tabindex="-1">重置动态定价 <a class="header-anchor" href="#重置动态定价" aria-label="Permalink to &quot;重置动态定价&quot;">​</a></h2><p>许多人都问了这个问题，问这些问题的人肯定没有了解 UltimateShop 的基础。动态定价是由公式决定的，所以你不能直接重置定价。若要这么做，你需要先重置你在公式中使用的变量。如果你使用了诸如上文提到的 <code>{buy-times-server}</code>，那么它们就可以被重置。</p><p>你可以通过“自动重置”功能重置交易次数，可以在“<a href="./shops.product-config-buy-sell-times-reset.html">交易次数重置</a>”章节中了解更多。</p>',10))])}const C=p(o,[["render",E]]);export{F as __pageData,C as default};
