[index]
[#1]介绍
[#2]安装教程
[#3]导入数据
[#4]配置文件
[#5]权限管理
[#6]命令
[#7]冲突命令

[#8]数据库
[#9]Redis 支持
[#10]语言贡献
[#11]Plan 插件联动
[#12]地图插件联动
[#13]冷却
[#14]经济联动
[#15]强制 tpahere
[#16]限制地标传送点
[#17]统一重生
[#18]统一主城
[#19]变量集群
[#20]GUI 附属
[#21]从旧版迁移
[#22]API
*[#23]API 示例^
*[#24]API 事件
[#25]!翻译信息
[/index]
[b]【前言】[/b]
2023/7/19 19:07
于是乎，新的任务又出现了。
每天翻译几乎已经成习惯了。我爱翻译。

2023/7/22 22:51
没想到这么快就翻译完了，虽然收尾工作有些烂。
不过后期可以再跟进的，就这样吧。

^ 该章节部分代码由于未知原因无法上传，帖中保留的是正文翻译版本。

[b]【链接】[/b]

原帖：https://william278.net/docs/huskhomes
插件：https://william278.net/project/huskhomes/

[page]
[size=5][b]安装教程[/b][/size][hr]
该教程将会引导你将 HuskHomes 安装在你的 Spigot、Fabric、Sponge 或是大型群组服务器上。

[size=4][b]安装需求[/b][/size][hr]
[list]
[*]一个使用了 Java 16+，且为 Java 版的 Minecraft 服务器。服务器核心种类可为 Spigot（1.16.5 或更高）、Fabric（需最新版）或 Sponge（API v8 或更高）；
[*]（支持群组服所用）一个群组服（Velocity 或 BungeeCord）和以 MySQL（8.0或更高）或 MariaDB 作为数据库的存储方法；
[*]（用于可选的 Redis 支持）Redis 数据库（5.0 或更高）。
[/list]
[size=4][b]为你的服务器下载 HuskHomes[/b][/size][hr]
从插件的发布页下载对应的最新版 jar 文件：

[list]
[*]Spigot 或 Paper 及其分支服务端请下载名为 [font=Consolas]HuskHomes-Plugin[/font] 的 jar 文件；
[*]Fabric 服务器请下载名为 [font=Consolas]HuskHomes-Fabric[/font] 的 jar 文件；
[*]Sponge 服务器请下载名为 [font=Consolas]HuskHomes-Sponge[/font] 的 jar 文件。
[/list]
[size=4][b]单服安装教程[/b][/size][hr]
这些步骤将会指导你把 HuskHomes 安装在你的 Spigot、Fabric 或 Sponge 服务器上。

[size=3][b]1. 安装 jar 文件[/b][/size]

[list]
[*]将插件 jar 文件放在你的 Spigot 服务器下的 [font=Consolas]/plugins/[/font] 文件夹，或是你的 Fabric/Sponge 服务器下的 [font=Consolas]/mods[/font] 文件夹中。
[/list]
[size=3][b]2. 重启服务器并修改配置文件[/b][/size]

[list]
[*]开启服务器，之后关闭，使 HuskHomes 生成它的配置文件；
[*]现在就可以按你的喜好编辑配置文本和语言文件了。
[/list]
[size=3][b]3. 再次开启你的服务器[/b][/size]

[list]
[*]再次开启你的服务器，享受 HuskHomes 吧！
[/list]
[hr]
[size=4][b]群组服安装教程[/b][/size][hr]
这些步骤将会指导你将 HuskHomes 安装在多个 Spigot、Fabric 或 Sponge 服务器上，并将它们连接。注意，搭建过程需要用到 MySQL 数据库（8.0 或更高）。

[size=3][b]1. 安装 jar 文件[/b][/size]

[list]
[*]将插件 jar 文件放在你的 Spigot 服务器下的 [font=Consolas]/plugins/[/font] 文件夹，或是你的 Fabric/Sponge 服务器下的 [font=Consolas]/mods[/font] 文件夹中。
[*]你不需要将其安装在群组服上。
（译者注：HuskHomes 的这种群组服同步方式真的很不错。省去了兼容 BC 或 Velocity 的代码编写。）
[/list]
[size=3][b]2. 重启服务器并修改配置文件[/b][/size]

[list]
[*]开启服务器，之后关闭，使 HuskHomes 生成它的配置文件；
[*]对于高级用户：如果你想的话，你可以创建一个 config.yml 文件并同步每个插件 [font=Consolas]/plugins/HuskHomes/[/font]（Fabric/Sponge 服务器的文件路径为 [font=Consolas]/config/HuskHomes[/font]）文件夹下的文件，使更新它们变得更加方便。
[/list]
[size=3][b]3. 修改配置文件使插件启用跨服模式[/b][/size]

[list]
[*]找到每个服务器上 HuskHomes 的 config.yml 文件（在 Spigot 服务端的路径大约为 [font=Consolas]~/plugins/HuskHomes/config.yml[/font]，而在 Fabric/Sponge 服务端的路径大约为 [font=Consolas]~/config/huskhomes/config.yml[/font]）；
[*]在配置文件中的 [font=Consolas]database[/font] 部分，将 [font=Consolas]type[/font] 项的值设置为 [font=Consolas]MYSQL[/font] 或 [font=Consolas]MARIADB[/font]（这里取决于你所使用的数据库种类）；
[*]在 [font=Consolas]mysql/credentials[/font] 设置项下，配置你的 MySQL 或 MariaDB 登录凭据；
[*]下翻并寻找 [font=Consolas]cross_server[/font] 设置项，并将 [font=Consolas]enabled[/font] 项的值设置为 [font=Consolas]true[/font]；
[*]若你想的话，你可以配置一个 Redis 服务器来用于网络通信（若要这么做，请将配置文本中的 [font=Consolas]messenger_type[/font] 项设置为 REDIS）；
[*]保存配置文件，并确保所有子服均同步了该配置文件。
[/list]
[size=4][b]4. 重启服务器并设置 server.yml 下的值[/b][/size]

[list]
[*]重启各个子服。一个名为 [font=Consolas]server.yml[/font] 的文件将会在上个步骤提及过的插件配置文件夹中生成；
[*]将该文件中 [font=Consolas]name[/font] 项的值修改为在群组服配置中设置的服务器 ID（例如，若该服为你使用命令 [font=Consolas]/server hub[/font] 连接的服务器，那么你需要将这项值修改为“hub”）。
[/list]
[size=4][b]5. 再次重启你的服务器[/b][/size]
[list]
[*]如果你所提供的 MySQL 凭据正确，你的群组服现在就可以正常使用 HuskHomes 了！
[*]如果你愿意，你也可以删除插件一开始生成的 [font=Consolas]HuskHomeData.db[/font] 文件。
（译者注：因为本教程中改用了群组服的数据同步，因此用于单端的存储方法将不再有效，该 .db 文件就是本地数据所在的位置，删除后不会影响服务器运行。）
[/list]

[size=4][b]下一步[/b][/size][hr]
[list]
[*]命令与权限
[*]主配置文件
[*]数据库设置
[*]Redis 支持
[*]语言设置
[/list]
[page]
[size=5][b]导入数据[/b][/size][hr]
[quote][backcolor=#282828][color=#ffd700][b]！警告：[/b][/color][/backcolor]转化的数据将会覆盖 HuskHomes 现有的所有插件数据，请在开始数据导入之前务必做好服务器的备份。[/quote]
HuskHomes 支持从下列插件/模组通过命令 [font=Consolas]/huskhome import[/font] 导入数据。
[table=60%]
[tr][td][b]插件/模组名称[/b][/td][td][b]支持导入的数据内容[/b][/td][td][b]安装的平台[/b][/td][td][b]官网链接[/b][/td][/tr]
[tr][td]EssentialsX[/td][td]家传送点、地标传送点、用户数据[/td][td]Spigot、Paper[/td][td]https://essentialsx.net/[/td][/tr]
[/table]
[size=4][b]从 EssentialsX 导入数据[/b][/size][hr]
HuskHomes 支持从 EssentialsX（2.19.7 或更高的版本）导入家、地标及用户传送点的相关数据。

请注意，导入的数据会覆盖任何重复的已存在数据（例如，名字相同的家传送点将会被从 Essentials 导入的覆盖）。按照下列步骤来正确导入你的数据：

[list=1]
[*]在你的服务器上安装最新版本的 HuskHomes；
[*]将 2.19.7 或更高版本的 EssentialsX 安装在你的服务器上，并确保用户数据没有丢失。若有需要，可重启服务器；
[*]通过输入命令 [font=Consolas]/huskhomes import list[/font] 来验证 EssentialsX 数据导入可用；
[*]输入命令 [font=Consolas]/huskhomes import start EssentialsX[/font] 开始转化。数据转化进度和转化的数据量将会在游戏的聊天栏或服务器的后台一并显示。
[*]当数据转化完毕后，请输入命令 [font=Consolas]/huskhomes:warplist[/font] 和 [font=Consolas]/huskhomes:homelist <玩家名称>[/font] 来验证数据是否被正确转化。
[/list]
完成转化后，你应当重启服务器。
[page]
[size=5][b]配置文件[/b][/size][hr]
这一页包含着 HuskHomes 的配置文件结构。

[size=4][b]配置结构[/b][/size][hr]
这些文件位于 📁[font=Consolas]plugins/HuskHomes[/font]（Spigot 服务端）或 [font=Consolas]config/HuskHomes[/font]（Fabric、Sponge 服务端）下。

[list]
[*]📄[font=Consolas]config.yml[/font]：插件的主体配置文件
[*]📄[font=Consolas]server.yml[/font]：（仅跨服）服务器 ID 配置
[*]📄[font=Consolas]spawn.yml[/font]：本地存储的服务器出生点位置，使用命令 /setspawn 来生成该命令。
[*]📄[font=Consolas]messages-xx-xx.yml[/font]：插件的本地汉化文件，以 MineDown 格式标注（详细内容见语言设置章节）。
[/list]
[size=4][b]示例配置[/b][/size][hr]
config.yml[hr][code]# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃       HuskHomes 主配置文件    ┃
# ┃       插件作者 William278     ┃
# ┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
# ┣╸ 有关信息: https://william278.net/project/huskhomes/
# ┣╸ 配置帮助: https://william278.net/docs/huskhomes/config-files/
# ┗╸ 插件文档: https://william278.net/docs/huskhomes/
# 插件默认使用的语言。有关内容: https://william278.net/docs/huskhomes/translations
language: en-gb
# 是否在插件启动后检查更新
check_for_updates: true
database:
  # 使用的数据库种类 (SQLITE, H2, MYSQL 或 MARIADB)
  type: SQLITE
  mysql:
    credentials:
      # 若你正在使用 MYSQL 或 MARIADB 作为数据存储方式，你需要在这里设置登录凭证
      host: localhost
      port: 3306
      database: HuskHomes
      username: root
      password: pa55w0rd
      parameters: ?autoReconnect=true&useSSL=false&useUnicode=true&characterEncoding=UTF-8
    connection_pool:
      # MYSQL / MARIADB 数据库的 Hikari 连接池设定。 除非你知道你在做什么，否则请勿随意改动！
      size: 12
      idle: 12
      lifetime: 1800000
      keepalive: 30000
      timeout: 20000
  # 在数据库中使用的数据表名称。 除非你知道你在做什么，否则请勿随意改动！
  table_names:
    position_data: huskhomes_position_data
    warp_data: huskhomes_warps
    saved_position_data: huskhomes_saved_positions
    player_cooldowns_data: huskhomes_user_cooldowns
    home_data: huskhomes_homes
    teleport_data: huskhomes_teleports
    player_data: huskhomes_users
general:
  # 普通玩家可创建家传送点的数量，可被 the huskhomes.max_homes.<数字> 权限覆盖。
  max_homes: 10
  # 普通玩家可创建的公共传送点的数量. 可被 huskhomes.max_public_homes.<数字> 权限覆盖。
  max_public_homes: 10
  # 权限限制的设置传送点数量是否可以叠加 (例如 huskhomes.max_homes.<数字>)
  stack_permission_limits: false
  # 玩家是否需要对应权限 (huskhomes.command.warp.<地标名称>) 才可传送至对应地标
  permission_restrict_warps: false
  # 在使用 /sethome <名称> 或 /setwarp <名称> 命令时若传送点名称已存在，是否覆盖先前的传送点
  overwrite_existing_homes_warps: true
  # 玩家需要在多少时间内保持不动并不受到伤害才可进行传送（单位为秒）
  teleport_warmup_time: 5
  # 传送预热计时器需要在哪里显示（可用位置；CHAT、ACTION_BAR、TITLE、SUBTITLE 或 NONE）
  teleport_warmup_display: ACTION_BAR
  # 收到的传送请求要多长时间才会过期（单位为秒）
  teleport_request_expiry_time: 60
  # 命令 /tpahere 是否只使用传送请求发起者当时的位置。相关文档： https://william278.net/docs/huskhomes/strict-tpahere/
  strict_tpa_here_requests: true
  # 家/地标传送点是否大小写敏（例如，决定 /home HomeOne 和 /home homeone 是否重复）
  case_insensitive_names: false
  # 家/地标传送点是否允许 UTF-8 字符（例如，允许 /home 你好(原文如此)）
  allow_unicode_names: false
  # 家/地标传送点是否允许在描述中插入 UTF-8 字符
  allow_unicode_descriptions: true
  # 命令 /back 是否可以传送至玩家的死亡地点
  back_command_return_by_death: true
  # 命令 /back 是否需要兼容其他使用 PlayerTeleportEvent 事件的插件（可能会造成冲突）
  back_command_save_teleport_event: false
  # 聊天菜单列表中每一页最多列出几个项目
  list_items_per_page: 12
  # 是否异步执行传送（传送前预加载地形）
  asynchronous_teleports: true
  # 是否播放音效
  play_sound_effects: true
  # 不同操作播放的声音
  sound_effects:
    teleportation_cancelled: entity.item.break
    teleportation_warmup: block.note_block.banjo
    teleportation_complete: entity.enderman.teleport
    teleport_request_received: entity.experience_orb.pickup
  # 是否启用智能补全（如果可以的话）
  brigadier_tab_completion: true
cross_server:
  # 允许跨服传送。需要将数据库种类设置为 MYSQL
  enabled: false
  # 跨服传递信息的种类。可选：PLUGIN_MESSAGE, REDIS
  messenger_type: PLUGIN_MESSAGE
  # 为你正在使用 HuskHomes 群组服设置一个统一的 ID。 除非你知道你在做什么，否则请勿随意改动！
  cluster_id: ''
  global_spawn:
    # 通过地标定义服务器的出生点，使用 /spawn 命令可以传送至该地。相关文档： https://william278.net/docs/huskhomes/global-spawn/
    enabled: false
    # 要设置为全局出生点的地标名称。
    warp_name: Spawn
  # 玩家重生点是否跨服。相关文档： https://william278.net/docs/huskhomes/global-respawning/
  global_respawning: false
  redis_credentials:
    # 若 messenger_type 设置为了 REDIS，则你需要在此设置先关登录凭据。相关文档： https://william278.net/docs/huskhomes/redis-support/
    host: localhost
    port: 6379
    password: ''
    use_ssl: false
rtp:
  # 玩家随机传送的半径，以出生点为半径
  radius: 5000
  # 玩家不能随机传送至的半径，以出生点为中心
  spawn_radius: 500
  # 随机传送的计算均值，用以计算距离世界中心的长度
  distribution_mean: 0.75
  # 该值用于计算与世界中心距离的正态分布的标准偏差值
  distribution_deviation: 2.0
  # 禁用 /rtp 命令的世界. 请注意本插件的 /rtp 命令不能在下界正常工作。
  restricted_worlds:
    - world_nether
    - world_the_end
cooldowns:
  # 是否在不同操作之间添加冷却
  enabled: true
  # 特定操作冷却的时间长度（单位为秒）。相关文档： https://william278.net/docs/huskhomes/cooldowns/
  cooldown_times:
    random_teleport: 600
economy:
  # 启用经济插件联动（需要安装 Vault）
  enabled: false
  # 设置玩家可以免费设置多少个家传送点，若超出该数量，玩家就需要花钱购买额外槽位。
  free_home_slots: 5
  # 执行特定操作所耗费的经济单位。相关文档： https://william278.net/docs/huskhomes/economy-hook/
  costs:
    make_home_public: 50.0
    additional_home_slot: 100.0
    random_teleport: 25.0
map_hook:
  # 在你的 Dynmap、BlueMap 或 Pl3xMap 的网页地图上显示家/地标传送点。相关文档： https://william278.net/docs/huskhomes/map-hooks
  enabled: true
  # 在网页地图上显示公共传送点
  show_public_homes: true
  # 在网页地图上显示地标传送点
  show_warps: true
# 禁用的命令列表 (例如设置 ['/home', '/warp'] 可以禁用 /home 和 /warp 命令)
disabled_commands: [][/code]
spawn.yml[hr]若要产生此文件，你应当在游戏中输入 [font=Consolas]/setspawn[/font] 命令[code]# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃ 服务器的 /spawn 位置缓存           ┃
# ┃ 请在游戏中使用命令 /setspawn 来编辑 ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
x: 0.0
y: 64.0
z: 0.0
yaw: 180.0
pitch: 0.0
world_name: world
world_uuid: 00000000-0000-0000-0000-000000000000[/code]
server.yml[hr]该文件只会在你使用群组服并有多个子服安装 HuskHomes 时才会出现。[code]# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃  HuskHomes 服务器 ID 配置文件  ┃
# ┃      插件作者 William278      ┃
# ┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
# ┣╸ 该文件必须包含此服务器在群组文件中设置的 ID。
# ┣╸ 若你使用命令 /server alpha 加入该子服，那么应该将该内容设置为‘alpha’（大小写敏感）
# ┗╸ 你只需要在跨服模式设置该文件。
name: beta[/code]
[page]
[size=5][b]权限管理[/b][/size][hr]
为了管理 HuskHomes 在服务器上的功能，你应当安装一个权限管理插件。但是，如果你的服务器只是用于好友之间玩耍，那么可以选择不安装权限管理插件，并在本插件的 [font=Consolas]config.yml[/font] 中修改一些设置。

[size=4][b]使用 LuckPerms[/b][/size]

[url=https://luckperms.net/]LuckPerms[/url] 是标准、稳定并广受推荐的权限管理插件，且能在 Spigot、Fabric 和 Sponge 服务端上运行。通过 LuckPerms 的安装教程来开始使用此插件。你可以输入命令 [font=Consolas]/lp editor[/font] 来将本页面列出的权限分配给对应的权限组。许多的权限是对普通用户默认开放的（见下）。你可以将权限设置为“false”来将该权限从组中移除。（译者注：即设置负权限。）

[size=4][b]无权限管理插件[/b][/size]

所有命令在默认的管理员权限下均可用，而不需要权限管理插件。下列命令需要管理员才可使用（通过命令 [font=Consolas]/op <玩家名称>[/font] 将指定玩家变为管理员）：

[list]
[*]/tp
[*]/tphere
[*]/tpaall
[*]/tpall
[*]/setspawn
[*]/setwarp
[*]/delwarp
[*]/editwarp
[*]/tpoffline
[/list]
其他的所有命令（但[i]不是所有的子命令[/i]）都默认可被玩家使用；你可以直接禁用这些命令来阻止玩家使用它们，或安装一个权限管理插件来获得更好的管理体验（[i]推荐[/i]）。
[page]
[size=5][b]命令[/b][/size][hr]
HuskHomes 提供了一系列可供你使用的命令。这个页面会为每个权限列出命令，来让你管理权限以合理使用本插件的功能。

[size=4][b]命令与权限表[/b][/size][hr][quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font] 命令冲突：[/b][/color][/backcolor]若你有多个插件提供相似的命令，你需要创建一个命令的等价用法来确保 HuskHomes 的命令能优先执行。[/quote]这是一个 HuskHomes 的命令及其对应权限的列表。由本插件提供用以控制其他变量的额外权限也会在下面列出！
[table=98%,White]
[tr][td][align=center][b]命令[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]基本权限†[/b][/align][/td][td][align=center][b]默认拥有‡[/b][/align][/td][/tr]
[tr][td][font=Consolas]/home <名称>[/font][/td][td]传送至一个家传送点[/td][td][font=Consolas]huskhomes.command.home[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/homelist [页码][/font][/td][td]列出你设置的家传送点[/td][td][font=Consolas]huskhomes.command.homelist[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/sethome <名称>[/font][/td][td]设置一个家传送点[/td][td][font=Consolas]huskhomes.command.sethome[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/delhome <名称>[/font][/td][td]删除一个家传送点[/td][td][font=Consolas]huskhomes.command.delhome[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/edithome <名称> [rename（重命名）/description（修改描述）/relocate（重设位置）/privacy（设置开放状态）][/font][/td][td]编辑你的家传送点[/td][td][font=Consolas]huskhomes.command.edithome[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/phome [<玩家名称.家名称>][/font][/td][td]传送至一个公开的家传送点[/td][td][font=Consolas]huskhomes.command.phome[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/phomelist [页码][/font][/td][td]浏览可用的公共家传送点[/td][td][font=Consolas]huskhomes.command.phomelist[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/warp <名称>[/font][/td][td]传送至一个地标[/td][td][font=Consolas]huskhomes.command.warp[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/warplist [页码][/font][/td][td]浏览可用的地标传送点[/td][td][font=Consolas]huskhomes.command.warplist[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/setwarp <名称>[/font][/td][td]设置一个地标传送点[/td][td][font=Consolas]huskhomes.command.setwarp[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/delwarp <名称>[/font][/td][td]删除一个地标传送点[/td][td][font=Consolas]huskhomes.command.delwarp[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/editwarp <名称> [rename（重命名）/description（修改描述）/relocate（重设位置）][/font][/td][td]编辑地标传送点[/td][td][font=Consolas]huskhomes.command.editwarp[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/tp <目标> [位置][/font][/td][td]传送至玩家或特定位置[/td][td][font=Consolas]huskhomes.command.tp[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/tphere <玩家名称>[/font][/td][td]将玩家传送到你的位置[/td][td][font=Consolas]huskhomes.command.tphere[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/tpa <玩家名称>[/font][/td][td]向其他玩家发出传送请求[/td][td][font=Consolas]huskhomes.tpa[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/tpahere <玩家名称>[/font][/td][td]请求玩家传送到自己的位置[/td][td][font=Consolas]huskhomes.command.tpahere[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/tpaccept [玩家名称][/font][/td][td]接受玩家的传送请求（译者注：直接输入命令默认同意最晚发送给自己的传送请求）[/td][td][font=Consolas]huskhomes.command.tpaccept[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/tpdecline [玩家名称][/font][/td][td]拒绝玩家的传送请求（译者注：直接输入命令默认拒绝最晚发送给自己的传送请求）[/td][td][font=Consolas]huskhomes.command.tpdecline[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/rtp [玩家名称] [世界名称][/font][/td][td]在指定世界随机传送[/td][td][font=Consolas]huskhomes.command.rtp[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/tpignore[/font][/td][td]忽略待处理的传送请求[/td][td][font=Consolas]huskhomes.command.tpignore[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/tpoffline <玩家名称>[/font][/td][td]传送至玩家最后上线的位置[/td][td][font=Consolas]huskhomes.commands.tpoffline[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/tpall[/font][/td][td]将所有人传送至你当前的位置[/td][td][font=Consolas]huskhomes.command.tpall[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/tpaall[/font][/td][td]向所有玩家发送传送至自己的请求[/td][td][font=Consolas]huskhomes.command.tpaall[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/spawn[/font][/td][td]传送至主城[/td][td][font=Consolas]huskhomes.command.spawn[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/setspawn[/font][/td][td]设置主城出生点位置[/td][td][font=Consolas]huskhomes.command.setspawn[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/back[/font][/td][td]返回上一个传送的位置，或者返回死亡地点（译者注：由其他插件造成的传送可能也会被本插件记录，例如使用 back 命令时可能会传送至电梯插件的电梯方块附近）[/td][td][font=Consolas]huskhomes.command.back[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/huskhomes [about（查询插件信息）/help（帮助页面）/reload（重载插件）/import（导入数据）/update（检查更新）][/font][/td][td]浏览插件信息或重载插件配置文件[/td][td][font=Consolas]huskhomes.command.huskhomes[/font][/td][td][align=center]✅[/align][/td][/tr]
[/table]
[list]
[*]† 基本权限 — 拥有对应权限才可执行命令；一些命令需要额外的权限才可正常运作（见下）；
[*]‡ 是否拥有 — ✅ = 所有玩家默认拥有 — ❌ = 仅管理员拥有
[/list]
[size=3][b]等价用法[/b][/size]

下列命令有等价用法，可用于快速输入命令：
[table=98%,White]
[tr][td][align=center][b]命令[/b][/align][/td][td][align=center]等价用法[/align][/td][/tr]
[tr][td][font=Consolas]/homelist[/font][/td][td][font=Consolas]/homes[/font][/td][/tr]
[tr][td][font=Consolas]/phome[/font][/td][td][font=Consolas]/publichome[/font][/td][/tr]
[tr][td][font=Consolas]/phomelist[/font][/td][td][font=Consolas]/phomes[/font]、[font=Consolas]/publichomelist[/font][/td][/tr]
[tr][td][font=Consolas]/warplist[/font][/td][td][font=Consolas]/warps[/font][/td][/tr]
[tr][td][font=Consolas]/tp[/font][/td][td][font=Consolas]/tpo[/font][/td][/tr]
[tr][td][font=Consolas]/tpaccept[/font][/td][td][font=Consolas]/tpyes[/font][/td][/tr]
[tr][td][font=Consolas]/tpdecline[/font][/td][td][font=Consolas]/tpno[/font]、[font=Consolas]/tpdeny[/font][/td][/tr]
[/table]
[size=4][b]禁用命令[/b][/size][hr]
若你想要禁用一个命令，只需将它添加至你配置文件中的 [font=Consolas]disabled_commands[/font] 区域，如下文所示。请注意低于 1.19.4 的 Paper 服务端，或是运行了 Spigot 的服务端（不推荐——请更新到 Paper！），禁用的命令仍然会被注册，但是会在执行命令时弹出一个提醒玩家“此命令被禁用”的消息。在 1.19.4+ 版本的 Paper 服务器上，插件将会以 Paper 插件的形式载入（并显示在插件列表 [font=Consolas]/plugins[/font] 中），且被禁用的命令完全不会被注册。

在配置文本中禁用指定命令[hr][code]# 禁用的命令列表 (例如设置 ['/home', '/warp'] 可以禁用 /home 和 /warp 命令)
disabled_commands: [ '/rtp' ][/code]
[size=4][b]限制设家[/b][/size][hr]
你可以通过权限修改家传送点的最大数量，设置玩家可创建的免费家传送点、公共家传送点的数量。
[list]
[*][font=Consolas]huskhomes.max_homes.<数量>[/font] — 决定玩家可设置的最大家传送点数量
[*][font=Consolas]huskhomes.free_homes.<数量>[/font] — 决定玩家可设置的免费家传送点数量†
[*][font=Consolas]huskhomes.max_public_homes.<数量>[/font] — 决定玩家可设置的最大公共家传送点数量
[/list]

† 仅在启用了经济联动的服务器上可用

若玩家有多个权限节点（例如在多个权限组中），HuskHomes 将会选择数量最多的权限节点（译者注：玩家此时不能叠加获得传送点设置数量上限）。若你需要这些权限能够[i]叠加[/i]，你可以在配置文本中将 [font=Consolas]stack_permission_limits[/font] 项设置为 [font=Consolas]true[/font]（位于 [font=Consolas]general[/font] 设置下）。

请注意，权限设置的值将会覆盖配置文件中默认的上限值（位于 [font=Consolas]general[/font] 设置下的 [font=Consolas]max_homes[/font]、[font=Consolas]max_public_homes[/font]，以及位于 [font=Consolas]economy[/font] 设置下的 [font=Consolas]free_homes[/font]）

[size=4][b]其他权限[/b][/size][hr]

使用 /back 命令返回上一个传送位置或死亡位置[hr]
这些权限可以控制玩家使用返回命令能做到的事情，包括返回上一个传送位置或死亡位置。
[table=98%,White]
[tr][td][align=center][b]命令[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]权限[/b][/align][/td][td][align=center][b]默认拥有[/b][/align][/td][/tr]
[tr][td]（复活后）[font=Consolas]/back[/font][/td][td]使用 /back 命令返回至死亡地点†[/td][td][font=Consolas]huskhomes.command.back.death[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/back[/font][/td][td]使用 /back 命令来返回上一个传送点[/td][td][font=Consolas]huskhomes.command.back.previous[/font][/td][td][align=center]✅[/align][/td][/tr]
[/table]
† 需要在配置文本启用此项才可使用这个特性。

设置家的私有性[hr]
这些权限允许你设置家传送点的公开或私有状态（切换私有性）。这里有供你使用、编辑或删除未被设置为公开状态的家传送点的权限。
[table=98%,White]
[tr][td][align=center][b]命令[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]权限[/b][/align][/td][td][align=center][b]默认拥有[/b][/align][/td][/tr]
[tr][td][font=Consolas]/edithome <名称> privacy [public（公开）/private（私有）][/font][/td][td]修改家传送点的公开性[/td][td][font=Consolas]huskhomes.command.edithome.privacy[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/homelist <名称> [页码][/font][/td][td] [/td][td][font=Consolas]huskhomes.command.home.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/home [<拥有者名称>.<家传送点名称>][/font][/td][td]传送至玩家的一个家传送点，无论公开或私有[/td][td][font=Consolas]huskhomes.command.home.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/edithome [<拥有者名称>.<家传送点名称>] [rename（重命名）/description（修改描述）/relocate（修改位置）/privacy（修改公开性）][/font][/td][td]编辑用户的家传送点[/td][td][font=Consolas]huskhomes.command.edithome.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/delhome [<拥有者名称>.<家传送点名称>][/font][/td][td]删除指定玩家的一个家传送点[/td][td][font=Consolas]huskhomes.command.delhome.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[/table]

绕过传送预热、冷却以及经济检查[hr]
这些权限能让你绕过传送的预热检查、传送冷却以及经济检查（译者注：白话：传送扣钱）。
[table=98%,White]
[tr][td][align=center][b]描述[/b][/align][/td][td][align=center][b]权限[/b][/align][/td][td][align=center][b]默认拥有[/b][/align][/td][/tr]
[tr][td]绕过传送预热†[/td][td][font=Consolas]huskhomes.bypass_teleport_warmup[/font][/td][td]无[/td][/tr]
[tr][td]绕过传送冷却[/td][td][font=Consolas]huskhomes.bypass_cooldowns[/font][/td][td]无[/td][/tr]
[tr][td]绕过传送收费[/td][td][font=Consolas]huskhomes.bypass_economy_checks[/font][/td][td]无[/td][/tr]
[/table]
† 在配置文本设置传送预热时间为 [font=Consolas]<= 0[/font] 时该项权限没有实际效果。

额外的传送权限[hr]
这些权限允许你使用对其他玩家使用 /tp 或 /rtp，传送至指定坐标，或是随机传送至其他世界。

[table=98%,White]
[tr][td][align=center][b]命令[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]权限[/b][/align][/td][td][align=center][b]默认拥有[/b][/align][/td][/tr]
[tr][td][font=Consolas]/tp [玩家] [目标][/font][/td][td]传送其他玩家至目标玩家[/td][td][font=Consolas]huskhomes.command.tp.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/tp [玩家] <x> <y> <z> [世界名称] [服务器名称][/font][/td][td]传送至指定服务器、指定世界的指定位置[/td][td][font=Consolas]huskhomes.command.tp.coordinates[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/rtp [玩家][/font][/td][td]将其他玩家随机传送[/td][td][font=Consolas]huskhomes.command.rtp.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/rtp [玩家] [世界][/font][/td][td]将其他玩家在指定的世界中随机传送[/td][td][font=Consolas]huskhomes.command.rtp.world[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/spawn [玩家][/font][/td][td]将其他玩家传送至主城出生点[/td][td][font=Consolas]huskhomes.command.spawn.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/warp [地标名称] [玩家][/font][/td][td]将其他玩家传送至指定地标[/td][td][font=Consolas]huskhomes.command.warp.other[/font][/td][td][align=center]❌[/align][/td][/tr]
[/table]

/huskhomes 命令参数[hr]
这些权限控制玩家在 /huskhomes 命令中所能使用的参数类型。

[table=98%,White]
[tr][td][align=center][b]命令[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]权限[/b][/align][/td][td][align=center][b]默认拥有[/b][/align][/td][/tr]
[tr][td][font=Consolas]/huskhomes help [页码][/font][/td][td]浏览 HuskHomes 帮助命令[/td][td][font=Consolas]huskhomes.command.huskhomes.[/font][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]/huskhomes [about][/font][/td][td]浏览插件的有关信息[/td][td][font=Consolas]huskhomes.command.huskhomes.about[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/huskhomes reload[/font][/td][td]重载插件配置与消息文件[/td][td][font=Consolas]huskhomes.command.huskhomes.reload[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/huskhomes import [list（列出可转化的插件）/start（开始数据转化）][/font][/td][td]从其他插件或模组导入数据[/td][td][font=Consolas]huskhomes.command.huskhomes.import[/font][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]/huskhomes update[/font][/td][td]检查插件更新[/td][td][font=Consolas]huskhomes.command.huskhomes.update[/font][/td][td][align=center]❌[/align][/td][/tr]
[/table]
[page]
[size=5][b]冲突命令[/b][/size][hr]
[i]命令冲突可在你安装多个提供相似命令的插件时出现。[/i]

例如，如果你同时安装了 [url=https://essentialsx.net/]EssentialsX[/url] 和 HuskHomes，你会有两个 [font=Consolas]/home[/font] 命令，这会在玩家尝试使用命令时出现问题，执行的通常是服务器最先载入的插件所注册的那个命令。在这种情况下，玩家将会被传送到 Essentials 的家传送点，而不是 HuskHomes 的家传送点。

本章节给出了几种缓解此问题的方法。

[size=4][b]禁用 EssentialsX 命令[/b][/size][hr]
[quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font] 对下列插件有效：[/b][/color][/backcolor]EssentialsX（Spigot、Paper）[/quote]
[url=https://essentialsx.net/]EssentialsX[/url] 是一个流行的基础插件，提供了包括 [font=Consolas]/home[/font]、[font=Consolas]/warp[/font]、[font=Consolas]/spawn[/font] 和 [font=Consolas]/tpa[/font] 在内的命令。如果你安装了这个插件，你就需要禁用这些命令来避免与 HuskHomes 的冲突。

为了禁用这些命令，你需要在 EssentialsX 的配置文件（位于 [font=Consolas]Essentials/config.yml[/font]）中的 [font=Consolas]disabled-commands[/font] 设置来禁用命令。下面是一个在 EssentialsX 禁用命令的设置。

EssentialsX config.yml 文件[hr][code]# 禁用命令将会阻止 Essentials 处理这些命令，该功能不会影响其他已经注册的相同命令。
# 你不能禁用在其他插件中使用的命令，它们会优先注册。
# 见 https://bukkit.fandom.com/wiki/Commands.yml#aliases 来连接其他插件的命令。
disabled-commands:
  - home
  - sethome
  - homelist
  - delhome
  - warp
  - setwarp
  - warplist
  - delwarp
  - tp
  - tphere
  - tpa
  - tpahere
  - tpaccept
  - tpdeny
  - tpno
  - rtp
  - tpignore
  - tpoffline
  - tpall
  - tpaall
  - spawn
  - setspawn
  - back[/code]
  
[size=4][b]命名空间[/b][/size][hr]
[quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font] 对下列核心有效：[/b][/color][/backcolor]Spigot、Paper、Fabric、Sponge[/quote]

所有命令都会以命名空间的形式注册，所以你可以用这种方式来使用它们。例如，[font=Consolas]/minecraft:tp[/font] 将会执行原版的传送命令，而 [font=Consolas]/huskhomes:tp[/font] 则会执行 HuskHomes 的命令。

若你的服务器上有多个注册了相同命令的插件，例如，你可以使用 [font=Consolas]/huskhomes:home[/font] 执行 HuskHomes 的家传送点命令，而不是 EssentialsX 的家传送点命令。但是，这样会有些不方便，并且也会让玩家难以理解，所以我们推荐你创建命令等价用法来让这变得更简单。

[size=4][b]编辑 commands.yml[/b][/size][hr]
[quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font] 对下列核心有效：[/b][/color][/backcolor]Spigot、Paper[/quote]
Spigot 提供了一个 [url=https://bukkit.fandom.com/wiki/Commands.yml][font=Consolas]commands.yml[/font] 文件[/url]，能让你设置命令的等价用法。这个文件不但能设置其他插件的额外等价命令，还能决定哪些命令由哪些插件优先处理。

[size=3][b]覆盖 HuskHomes[/b][/size]

在你的 [font=Consolas]commands.yml[/font] 文件区域下确保 HuskHomes 命令能优先于其他插件的命令执行。这将会把没有插件前缀的命令变成有插件前缀的命令。（译者注：将 /命令 变为 /插件:命令 的形式。）

请记住如果你[i]想要[/i]其他插件命令覆盖 HuskHomes 的命令，你可以将这个配置文本 [font=Consolas]- "huskhomes:[/font] 的前缀改为其他插件的名称（例如，EssentialsX 可以将其改为 [font=Consolas]- "essentials:[/font] ）。
[page]
[size=5][b]数据库[/b][/size][hr]
HuskHomes 在你所选种类的数据库中存储玩家数据、家传送点、地标传送点及其他传送数据。在搭建跨服传送系统时，你需要将数据库中磊设置为 MySQL 或 MariaDB 来允许数据在任意地方都能被读取。

[size=4][b]数据库种类[/b][/size][hr]
[quote][backcolor=#282828][color=#ffd700][b]！警告：[/b][/color][/backcolor]当前没有自动迁移[i]数据库[/i]中数据的方法。手动迁移可能会导致数据丢失。[/quote]
[table=98%,White]
[tr][td][align=center][b]种类[/b][/align][/td][td][align=center][b]存储类型[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]是否支持跨服[/b][/align][/td][/tr]
[tr][td][font=Consolas]SQLITE[/font][/td][td]文件[/td][td]基于文件存储的数据库种类。是本插件的默认（推荐）存储选择。[/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]H2[/font][/td][td]文件[/td][td]与 SQLITE 相似，是基于文件存储的数据库种类，在数据库读取数据方面略有优化。[/td][td][align=center]❌[/align][/td][/tr]
[tr][td][font=Consolas]MYSQL[/font][/td][td]服务器[/td][td]在 MySQL 服务器上搭建的数据库。[/td][td][align=center]✅[/align][/td][/tr]
[tr][td][font=Consolas]MARIADB[/font][/td][td]服务器[/td][td]在 MariaDB 服务器上搭建的数据库。[/td][td][align=center]✅[/align][/td][/tr]
[/table]

[size=3][b]跨服[/b][/size]

若你正在一个群组服上使用 HuskHomes，你就需要使用任意一种支持跨服的数据库。这是因为跨服需要让数据在所有子服都能交互，以此使 HuskHomes 能在任意子服上使用相同的数据。

[size=4][b]配置[/b][/size][hr]
若要修改数据库种类，你需要在 [font=Consolas]config.yml[/font] 的 [font=Consolas]database[/font] 设置下修改这些选项。

数据库配置（config.yml）[code]database:
  # 使用的数据库种类 (SQLITE, H2, MYSQL 或 MARIADB)
  type: SQLITE
  mysql:
    credentials:
      # 若你正在使用 MYSQL 或 MARIADB 作为数据存储方式，你需要在这里设置登录凭证
      host: localhost
      port: 3306
      database: HuskHomes
      username: root
      password: pa55w0rd
      parameters: ?autoReconnect=true&useSSL=false&useUnicode=true&characterEncoding=UTF-8
    connection_pool:
      # MYSQL / MARIADB 数据库的 Hikari 连接池设定。 除非你知道你在做什么，否则请勿随意改动！
      size: 12
      idle: 12
      lifetime: 1800000
      keepalive: 30000
      timeout: 20000[/code]
[size=3][b]登录凭据（MariaDB & MySQL）[/b][/size]
    
当你正在以 MariaDB 或 MySQL 为数据库时，你将需要指定登录凭据（域名、端口、用户名、密码以及数据库名称）。这些凭据用来连接到你的数据库服务器。

额外地，如果你对高级的设置有需求，你可以修改 HikariCP 连接池设置。默认值对大部分服务器适用。
[page]
[size=5][b]Redis 数据库支持[/b][/size][hr]
对于群组服，HuskHomes 支持以 Redis（需 5.0 以上版本）为插件的通信协议。

[size=4][b]安装教程[/b][/size][hr]
若要使用 Redis，你的服务器必须在 [font=Consolas]cross_server[/font] 模式下正确配置。完成之后，按下列步骤完成安装：
[list=1]
[*]关闭所有的字符；
[*]确保你的 Redis 服务器正在运行；
[*]修改每个子服的 [font=Consolas]config.yml[/font] 文件，在 [font=Consolas]cross_server[/font] 设置位置下填入 Redis 服务器的登录凭据（[font=Consolas]credentials[/font]）。
[list=2][*]大部分 Redis 服务器在安装后的默认设置是没有密码的，你可以将 [font=Consolas]password[/font] 一栏留空（'' 英文单引号或双引号，表示空字符串）。
[/list]在配置文本中将 [font=Consolas]messenger_type[/font] 设置为 [font=Consolas]REDIS[/font]保存你的配置文件，并重启服务器。检查并确保插件在服务器开启时成功启用了网络通信。如果没有，请检查你的登录凭据（如有必要，尝试不设置密码和关闭 SSL 模式）。

[page]
[size=5][b]语言贡献[/b][/size][hr]
HuskHomes 支持许多种类的语言，这些语言由社区成员贡献。插件的默认语言为 [font=Consolas]en-gb[/font]（英文-英国）。消息文本以 MineDown 格式标注。

你可以通过修改插件 config.yml 中最顶上的 [font=Consolas]language[/font] 设置，来修改本插件所使用的语言。你所设置的语言必须是插件支持的。你可以通过查看翻译的存档[url=https://github.com/WiIIiam278/HuskHomes/tree/master/common/src/main/resources/locales]浏览插件支持的语言[/url]。

[size=4][b]贡献翻译[/b][/size][hr]
你可以提交一个包含从[url=https://github.com/WiIIiam278/HuskHomes/blob/master/common/src/main/resources/locales/en-gb.yml]默认语言[/url]翻译的 yaml 文件的拉取请求来为本插件的语言支持做贡献。这里是翻译的一些守则：
[list]
[*]不要翻译本地语言的键名称（例如 [font=Consolas]teleporting[/font]）；
[*]你拉取请求的内容必须为[url=https://github.com/WiIIiam278/HuskHomes/tree/master/common/src/main/resources/locales]本地语言[/url]中的一个文件；
[*]不要翻译 [url=https://github.com/Phoenix616/MineDown]MineDown[/url] 的格式字符，以及命令文本；只需要翻译英语原文的描述；
[*]每段语言文本需处在同一行，且要去掉页眉；
[*]使用 ISO 639-1 标准的[url=https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes]语言代码[/url]来命名你所翻译语言的文件；
[*]如果你可以，那么可以在 [font=Consolas]AboutMenu[/font] 下的翻译贡献者处添加你自己的名字，或者我们也会帮你完成这项工作。
[/list]
感谢你让 HuskHomes 在世界范围内变得更加易懂！
[page]
[size=5][b]Plan 插件联动[/b][/size][hr]
HuskHomes 支持在[url=https://github.com/plan-player-analytics/Plan]玩家统计[/url]（Plan）面板上显示关于玩家设置家传送点的信息。
[img]https://attachment.mcbbs.net/data/myattachment/forum/202307/22/133146k779mk7sstcpt7ss.png[/img]
Plan 插件联动

[size=4][b]安装需求[/b][/size][hr]
[list]
[*]HuskHomes 2.0 或更高；
[*]Plan 5.4.1690 或更高。
[/list]
[size=4][b]安装教程[/b][/size][hr]
[list=1]
[*]将 Plan 插件安装至你的 Spigot 服务器，并安装 HuskHoms 插件；
[*]修改 Plan 的配置文件并重启你的服务器；
[*]配置完毕后，数据将会开始出现在你的玩家面板下，在“插件”面板中的“HuskHomes”一栏中可以见到这些数据。
[/list]
[page]
[size=5][b]地图插件联动[/b][/size][hr]
HuskHomes 支持将家传送点显示在服务器的网络地图上。下列地图插件支持显示此类传送点：
[list]
[*][url=https://github.com/webbukkit/dynmap]Dynmap[/url]
[*][url=https://github.com/BlueMap-Minecraft/BlueMap]BlueMap[/url]
[*][url=https://github.com/BillyGalbreath/Pl3xMap]Pl3xMap[/url]（仅 1.19.4+）
[/list]
若要启用地图插件的联动支持，你需要在配置文件 [font=Consolas]config.yml[/font] 下的 [font=Consolas]map_hook[/font] 位置，将 [font=Consolas]enabled[/font] 项设置为 [font=Consolas]true[/font]。你也可以自由设置是否将公共家传送点或地标传送点显示在地图上，或是二者同时显示。

[size=4][b]Dynmap[/b][/size][hr]

[img]https://attachment.mcbbs.net/data/myattachment/forum/202307/22/133359zk80f0199z5mk2ah.png[/img]
若要启用 Dynamp 支持，请确保 config.yml 下的 [font=Consolas]map_hook[/font] 启用，并且服务器上安装了最新版本的 Dynmap。安装之后，重启你的服务器，公共家传送点和地标传送点就会显示在你的地图上。

你可以点击传送点标志来显示该传送点的详细信息。

[size=4][b]BlueMap[/b][/size][hr]

[img]https://attachment.mcbbs.net/data/myattachment/forum/202307/22/133400eyoglg0v8vuhzg0g.png[/img]
若要启用 BlueMap 支持，请确保 config.yml 下的 [font=Consolas]map_hook[/font] 启用，并且服务器上安装了最新版本的 BlueMap。安装之后，重启你的服务器，公共家传送点和地标传送点就会显示在你的地图上。

[size=4][b]Pl3xMap[/b][/size][hr]

若要启用 Pl3xMap 支持，请确保 config.yml 下的 [font=Consolas]map_hook[/font] 启用，并且服务器上安装了最新版本的 Pl3xMap。安装之后，重启你的服务器，公共家传送点和地标传送点就会显示在你的地图上。

你可以点击传送点标志来显示该传送点的详细信息。
[page]
[size=5][b]冷却[/b][/size][hr]
HuskHomes 支持在玩家执行特定操作时设置冷却。玩家在执行下一次相同的操作之前，必须要等待一段时间，否则操作就不会执行。冷却仅会在操作执行之后被刷新，玩家在冷却期间试图执行操作会被发送消息以提示剩余的冷却时间。

[size=4][b]设置冷却[/b][/size][hr]
冷却可以在 [font=Consolas]config.yml[/font] 的 [font=Consolas]cooldowns[/font] 下设置。若要启用冷却，将 [font=Consolas]enabled[/font] 的值改为 [font=Consolas]true[/font]，并在 [font=Consolas]cooldown_times[/font] 下设置指定操作的冷却时间。冷却时间为整数，单位为秒。

[size=3][b]绕过冷却[/b][/size]

拥有权限节点 [font=Consolas]huskhomes.bypass_cooldowns[/font] 的玩家可以无视冷却，并可立即执行他们想要的操作。

[size=3][b]操作列表[/b][/size]

F
[size=3][b]示例配置[/b][/size]

冷却在 [font=Consolas]config.yml[/font] 文件中，[font=Consolas]cooldowns[/font] 的 [font=Consolas]cooldown_times[/font] 下设置。默认情况下，只有一个随机传送（[font=Consolas]random_teleport[/font]）的冷却设置。可按照上表在这块区域中添加你想要的冷却。

设置冷却（config.yml）[hr][code]cooldowns:
  # 是否在不同操作之间添加冷却
  enabled: true
  # 特定操作冷却的时间长度（单位为秒）。相关文档： https://william278.net/docs/huskhomes/cooldowns/
  cooldown_times:
    random_teleport: 600
    additional_home_slot: 0
    make_home_public: 0
    random_teleport: 600
    back_command: 0
    home_teleport: 0
    public_home_teleport: 0
    warp_teleport: 0
    spawn_teleport: 0
    send_teleport_request: 0
    accept_teleport_request: 0[/code]
[page]
[size=5][b]经济联动[/b][/size][hr]
HuskHomes 支持将特定的操作设置为收费。玩家必须持有数量足够的货币才可执行该操作，否则将不予执行。玩家发送命令后，在执行操作之前就会扣款。

[size=4][b]设置教程[/b][/size][hr]
Spigot & Paper 的安装[hr][quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font] 对下列服务端有效：[/b][/color][/backcolor]Spigot、Paper[/quote]
若要启用经济插件联动，同时安装 [url=https://www.spigotmc.org/resources/vault.34315/]Vualt[/url] 和任意一个支持 Vault 的经济插件。然后，将 [font=Consolas]config.yml[/font] 下 [font=Consolas]economy[/font] 的 [font=Consolas]enabled[/font] 选项值设置为 [font=Consolas]true[/font]。

Sponge 的安装[hr][quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font] 对下列服务端有效：[/b][/color][/backcolor]Sponge[/quote]
若要在 Sponge 服务器上启用经济联动，你需要安装一个通过 Sponge 经济 API 管理玩家经济的模组。然后，将 [font=Consolas]config.yml[/font] 下 [font=Consolas]economy[/font] 的 [font=Consolas]enabled[/font] 选项值设置为 [font=Consolas]true[/font]。

[size=3][b]绕过经济检查[/b][/size]

拥有权限节点 [font=Consolas]huskhomes.bypass_economy_checks[/font] 将会绕过经济检查，并且可以免费执行原本需要收费的操作。

[size=4][b]家传送点槽位[/b][/size][hr]
当启用经济联动后，玩家将会需要在免费设家数量用完之后付款来解锁额外槽位。

玩家的免费设家次数用完时，插件就会向玩家收费。当免费的最后一个设家槽位被消耗掉时，插件会发送消息提醒该玩家。

你可以在配置文件的 [font=Consolas]economy[/font] 下的 [font=Consolas]free_home_slots[/font] 设置修改玩家可以拥有的免费设家数量。默认值为 [font=Consolas]5[/font]。

[size=4][b]经济操作[/b][/size][hr]
你可以在 [font=Consolas]config.yml[/font] 文件的 [font=Consolas]costs[/font] 一栏中为下列选项设置所消耗的经济单位。请注意这个设置区域默认只设置了 [font=Consolas]additional_home_slot[/font]、[font=Consolas]make_home_public[/font] 和 [font=Consolas]random_teleport[/font] 的经济消耗，可参照下表设置价格来启用这些操作的收费功能。

[size=3][b]操作表[/b][/size]
[table=98%,White]
[tr][td][align=center][b]操作种类[/b][/align][/td][td][align=center][b]操作描述[/b][/align][/td][td][align=center][b]默认消耗[/b][/align][/td][/tr]
[tr][td][font=Consolas]additional_home_slot[/font][/td][td]玩家购买一个额外的设置家传送点槽位。[/td][td][font=Consolas][align=right]100.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]make_home_public[/font][/td][td]玩家将家传送点转为开放。[/td][td][font=Consolas][align=right]50.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]random_teleport[/font][/td][td]玩家执行 /rtp 命令。[/td][td][font=Consolas][align=right]25.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]back_command[/font][/td][td]玩家执行 /back 命令返回至上一个传送点。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]home_teleport[/font][/td][td]玩家执行 /home 命令传送至自己的家传送点。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]public_home_teleport[/font][/td][td]玩家执行 /phome 命令传送至公开的家传送点。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]warp_teleport[/font][/td][td]玩家执行 /warp 命令传送至地标传送点。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]spawn_teleport[/font][/td][td]玩家执行 /spawn 命令传送至主城出生点。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]send_teleport_request[/font][/td][td]玩家发送传送请求。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[tr][td][font=Consolas]accept_teleport_request[/font][/td][td]玩家同意其他玩家的传送请求。[/td][td][font=Consolas][align=right]0.00[/align][/font][/td][/tr]
[/table]

[size=3][b]示例配置[/b][/size][quote][backcolor=#282828][color=#ffd700][b]！警告：[/b][/color][/backcolor]你必须在 config.yml 中指定一个小数值。（例如，[font=Consolas]100.00[/font] 是有效的，而 [font=Consolas]100[/font] 无效。）[/quote]经济消耗在 [font=Consolas]config.yml[/font] 下 [font=Consolas]economy[/font] 的 [font=Consolas]costs[/font] 配置。

设置经济消耗（config.yml）[hr][code]economy:
  # 启用经济插件联动（需要安装 Vault）
  enabled: false
  # 设置玩家可以免费设置多少个家传送点，若超出该数量，玩家就需要花钱购买额外槽位。
  free_home_slots: 5
  # 执行特定操作所耗费的经济单位。相关文档： https://william278.net/docs/huskhomes/economy-hook/
  costs:
    make_home_public: 50.0
    additional_home_slot: 100.0
    random_teleport: 25.0
    back_command: 0.0
    home_teleport: 0.0
    public_home_teleport: 0.0
    warp_teleport: 0.0
    spawn_teleport: 0.0
    send_teleport_request: 0.0
    accept_teleport_request: 0.0[/code]
[page]
[size=5][b]强制 tpahere[/b][/size][hr]
HuskHomes 提供了一个选项来将 [font=Consolas]/tpahere[/font] 请求强制化的选项。该功能会使该命令与 [font=Consolas]/tphere[/font] 相似。

[list]
[*][font=Consolas]/tpahere[/font] 请求强制化[b]禁用[/b]：当玩家同意 [font=Consolas]/tpahere[/font] 的传送请求后，他们将会在传送预热结束后传送到发出请求玩家的当前位置；
[*][font=Consolas]/tpahere[/font] 请求强制化[b]启用[/b]：当玩家同意 [font=Consolas]/tpahere[/font] 的传送请求后，他们将会在传送预热结束后传送到发出请求玩家执行命令时所在的位置。
[/list]
如果你的服务器使用了权限节点来限制玩家在哪里可以使用 [font=Consolas]/tpahere[/font] 命令，那么你可能就需要用到本功能。你可以在本插件 [font=Consolas]config.yml[/font] 中 [font=Consolas]general[/font] 的 [font=Consolas]strict_tpa_here_requests[/font] 下启用该选项。
[page]
[size=5][b]限制地标传送点[/b][/size][hr]
HuskHomes 支持通过权限限制地标传送点。这意味着玩家需要对应的 [font=Consolas]huskhomes.command.warp.<名称>[/font] 权限节点，来使用地标传送点，否则他们会被提醒权限不足。

若要启用权限限制地标传送点，你需要将配置文本下 [font=Consolas]general[/font] 的 [font=Consolas]permission_restrict_warps[/font] 项设置为 true。不要忘记给予玩家相应的权限节点（[font=Consolas]huskhomes.command.warp.<名称>[/font]）。
[page]
[size=5][b]统一重生[/b][/size][hr]
HuskHomes 支持统一重生，它是一种用于群组服的重生方法，将玩家的出生点统一到同一个设置的床位置，而不是每一个子服都有分别的床重生点。

若要启用统一重生，你的服务器必须在 [font=Consolas]cross_server[/font] 模式下预先配置好。然后将 [font=Consolas]cross_server[/font] 下的 [font=Consolas]global_respawning[/font] 项设置为 [font=Consolas]true[/font]。

[size=4][b]运行原理[/b][/size][hr]
[list]
[*]当玩家与床或重生锚交互时，HuskHomes 将会更新玩家的统一重生点；
[*]每当玩家死亡后，他们将会被传送至他们设置统一重生点的位置，传送种类为特殊的 [font=Consolas]RESPAWN[/font] 类型；
[*]当玩家来到他们设置重生点的服务器时，游戏将他们传送至对应的重生点并结束本次传送。若重生点被阻挡或被破坏，玩家则会被传送到该服务器的世界出生点。
[/list]
[page]
[size=5][b]统一主城[/b][/size][hr]
HuskHomes 允许你设置一个统一的跨服主城（[font=Consolas]/spawn[/font]）传送点，以迎合只想要一个主城传送点的服务器。该功能使用了一个 [font=Consolas]/warp[/font] 地标来作为服务器的跨服主城传送点。

若要启用统一主城，你的服务器必须在 [font=Consolas]cross_server[/font] 模式下预先配置好。然后，在 [font=Consolas]cross_server[/font] 下启用 [font=Consolas]global_spawn[/font] 项。额外地，你可以将地标传送点的名称设置在 [font=Consolas]warp_name[/font] 项下（默认：[font=Consolas]'spawn'[/font]）。 
[page]
[size=5][b]变量集群[/b][/size][hr]
若你安装了 PlaceholderAPI，HuskHomes（4.0.5 或更高版本）将会自动注册一系列变量，这些变量会返回格各自的特定值。

[size=4][b]变量列表[/b][/size][hr][table=98%,White]
[tr][td][align=center][b]变量名称[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][td][align=center][b]示例返回值[/b][/align][/td][/tr]
[tr][td][font=Consolas]%huskhomes_homes_count%[/font][/td][td]返回玩家设置的家传送点数量。[/td][td]3[/td][/tr]
[tr][td][font=Consolas]%huskhomes_max_homes%[/font][/td][td]返回玩家可设置的家传送点最大数量。[/td][td]10[/td][/tr]
[tr][td][font=Consolas]%huskhomes_max_public_homes%[/font][/td][td]返回玩家可设置的公开家传送点数量。[/td][td]5[/td][/tr]
[tr][td][font=Consolas]%huskhomes_free_home_slot%[/font][/td][td]返回玩家可免费设家的数量†。[/td][td]5[/td][/tr]
[tr][td][font=Consolas]%huskhomes_home_slots%[/font][/td][td]返回该玩家购买的设家槽位数量†。[/td][td]2[/td][/tr]
[tr][td][font=Consolas]%huskhomes_homes_list%[/font][/td][td]返回该玩家设置的家传送点名称，以英文逗号分隔。[/td][td]home, castle, tower[/td][/tr]
[tr][td][font=Consolas]%huskhomes_public_homes_count%[/font][/td][td]返回该玩家开放家传送点的数量[/td][td]3[/td][/tr]
[tr][td][font=Consolas]%huskhomes_public_homes_list%[/font][/td][td]返回该玩家开放家传送点的名称，以英文逗号分隔。[/td][td]castle, tower[/td][/tr]
[tr][td][font=Consolas]%huskhomes_ignoring_tp_requests%[/font][/td][td]返回该玩家是否设置了无视传送请求。[/td][td]true[/td][/tr]
[/table]
† 仅在启用了经济联动的服务器上有效。
[page]
[size=5][b]GUI 附属[/b][/size][hr]
HuskHomesGUI 是一个 HuskHomes 的附属，允许你通过 GUI 界面（箱子风格的界面）而不是使用聊天栏菜单编辑家传送点。
[img]https://user-images.githubusercontent.com/31187453/216150666-aab981ba-3d44-471b-9e54-72dd5034bbee.png[/img]
你可以从 [url=https://www.spigotmc.org/resources/huskhomesgui.91059/]Spigot[/url]、[url=https://polymart.org/resource/huskhomesgui.928]PolyMart[/url] 和 [url=https://modrinth.com/plugin/huskhomesgui]Modrinth[/url] 下载它，也可以[url=https://github.com/WiIIiam278/HuskHomesGUI]在这里浏览该插件的源码[/url]。

[size=4][b]安装教程[/b][/size][hr]
[list=1]
[*]下载最新版本的 HuskHomesGUI；
[*]将它放在你的服务器中的 [font=Consolas]~/plugins/[/font] 文件夹下，与最新版的 HuskHomes 一并安装；
[*]重启你的服务器；
[*]命令 [font=Consolas]/home[/font] 和 [font=Consolas]/warp[/font] 将会被 GUI 界面代替；
[*]如果你想，你可以编辑 [font=Consolas]~/plugins/HuskHomesGUI/config.yml[/font] 的文件来修改可视化的设置，或修改插件的显示语言。
[/list]

[size=4][b]命令列表[/b][/size][hr]
[font=Consolas]/huskhomesgui <reload（重载插件）|about（显示插件信息）>[/font] 命令允许你检查最新插件的版本，或是重载本插件。使用该命令的权限节点为 [font=Consolas]huskhomesgui.command.huskhomesgui[/font]
[page]
[size=5][b]从旧版迁移[/b][/size][hr]
[quote][backcolor=#282828][color=#ffd700][b]！警告：[/b][/color][/backcolor]不支持直接将 2.11.x 版本的数据转化为 4.x；你必须先下载 HuskHomes 3.2.2 版本并将旧版本数据转化到该版本，然后再将数据移动至 4.x 的 HuskHomes。鉴于 3.x 和 4.x 的数据结构相同，无需在这两个版本之间进行数据转化。[/quote]
若要从 HuskHomes 2.11.2 版本转化数据至 3.x 版本，请执行以下步骤：

[list]
[*]删除服务器下 [font=Consolas]plugins[/font] 旧版本的 [font=Consolas]HuskHomes-2.x.jar[/font] 文件；
[*]将新的 HuskHomes 3.x 版本的 jar 文件安放至文件夹；
[*]在你的 [font=Consolas]plugins/HuskHomes/[/font] 文件夹中，删除 [font=Consolas]messages.yml[/font] 文件使其重新生成；
[*]开启你的服务器。若你正在使用群组服，只需要开启其中的一个子服。HuskHomes 会自动升级你的数据；
[*]若你正在使用群组服：
[list]
[*]从你的每个子服中删除 [font=Consolas]plugins/HuskHomes/config.yml[/font] 文件；
[*]重新启动这些被删除文件的子服；
[*]在所有子服开启完毕以后再次关闭它们，打开重新生成的 config.yml 文件，填入你的数据库登录凭据，将数据库种类从 MYSQL 设置为 SQLITE。与此同时请确保开启了 cross_server 跨服模式。
[/list]
[*]更新你的权限管理插件，使用我们新版本的权限节点名称来手动更新你的权限组。
[/list]
大功告成！享受 3.x 版本的 HuskHomes 吧。
[page]
[size=5][b]API[/b][/size][hr]
HuskHomes API 提供了一些用于获取、编辑和更新玩家设置的家和地标传送点的方法，同时也包含了创建和执行（跨服）传送的功能。

API 通过 Maven 在 [url=https://repo.william278.net/#/releases/net/william278/huskhomes/]repo.william278.net[/url] 上分发，可通过任何 Mavem、Gradle 等项目导入。本插件的 JavaDocs 可在[url=https://repo.william278.net/javadoc/releases/net/william278/huskhomes/latest]此处[/url]浏览。

[size=4][b]兼容性[/b][/size][hr]
[url=https://repo.william278.net/#/releases/net/william278/huskhomes/][img]https://repo.william278.net/api/badge/latest/releases/net/william278/huskhomes?color=00fb9a&name=Maven&prefix=v[/img][/url]

为保持一致及方便使用，HuskHomes 的 API 版本与插件本身同步。但请注意次要的更新补丁可能导致 API 的变动，但绝不会在没有提醒的情况下对 API 进行大幅度更新。
[table=98%,White]
[tr][td][align=center][b]API 版本[/b][/align][/td][td][align=center][b]HuskHomes 版本[/b][/align][/td][td][align=center][b]受到支持[/b][/align][/td][/tr]
[tr][td][align=center]v4.x[/align][/td][td][i]v4.0—当前版本[/i][/td][td][align=center]✅[/align][/td][/tr]
[tr][td][align=center]v3.x[/align][/td][td][i]v3.0—v3.2.1[/i][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][align=center]v2.x[/align][/td][td][i]v2.0—v2.11.2[/i][/td][td][align=center]❌[/align][/td][/tr]
[tr][td][align=center]v1.x[/align][/td][td][i]v1.5—v1.5.11[/i][/td][td][align=center]❌[/align][/td][/tr]
[/table]
针对旧版本[hr]
HuskHomes 4.3.1 之前的版本发布在 [url=https://jitpack.io/#net.william278/HuskHomes2]JitPack[/url]，你需要使用 [font=Consolas]https://jitpack.io[/font] 仓库链接来代替。

[size=4][b]内容表[/b][/size][hr]
[list=1]
[*]将 API 添加至你的项目；
[*]将 HuskHomes 添加为依赖；
[*]下一步。
[/list]

[size=4][b]API 介绍[/b][/size][hr]
[size=3][b]1.1 使用 Maven 导入[/b][/size]
Maven 导入信息[hr]将仓库按如下代导入至你的 [font=Consolas]pom.xml[/font] 文件。你也可以指定 [font=Consolas]/snapshots[/font] 来使用包含最新开发构建的仓库（不稳定故不推荐）。[code]<repositories>
    <repository>
        <id>william278.net</id>
        <url>https://repo.william278.net/releases</url>
    </repository>
</repositories>[/code]
将依赖按如下代码导入至你的 [font=Consolas]pom.xml[/font] 文件。将 [font=Consolas]VERSION[/font] 处替换为 HuskHomes 最新的版本号（去除字母 v）：[img]https://img.shields.io/github/v/tag/WiIIiam278/HuskHomes?color=%23282828&label=%20&style=flat-square[/img]

[size=3][b]1.1 使用 Gradle 导入[/b][/size]
Gradle 安装信息[hr]
将依赖按如下代码添加至你的 [font=Consolas]build.gradle[/font]。你也可以指定 [font=Consolas]/snapshots[/font] 来使用包含最新开发构建的仓库（不稳定故不推荐）。[code]allprojects {
    repositories {
        maven { url 'https://repo.william278.net/releases' }
    }
}[/code]
将依赖按如下代码导入至你的文件。将 [font=Consolas]VERSION[/font] 处替换为 HuskHomes 最新的版本号（去除字母 v）：[img]https://img.shields.io/github/v/tag/WiIIiam278/HuskHomes?color=%23282828&label=%20&style=flat-square[/img][code]dependencies {
    compileOnly 'net.william278:huskhomes:VERSION'
}[/code]

[size=3][b]2. 将 HuskHomes 作为依赖导入[/b][/size]

将 HuskHomes 添加至你的插件中 [font=Consolas]plugins.yml[/font] 的 [font=Consolas]softdepend[/font]（作软依赖，即不强制要求安装 HuskHomes ）或 [font=Consolas]depend[/font]（作硬依赖，即强制要求安装 HuskHomes）下。[code]name: MyPlugin
version: 1.0
main: net.william278.myplugin.MyPlugin
author: William278
description: 'A plugin that hooks with the HuskHomes API!'
softdepend: # Or, use 'depend' here
  - HuskHomes[/code]
  
[size=3][b]3. 下一步[/b][/size]

现在你准备好了所有内容，你可以开始使用 HuskHomes 的 API 了！
[list]
[*]API 示例
[*]API 提供的事件
[/list]
[page]
[size=5][b]API 示例[/b][/size][hr]
[quote][backcolor=#282828][color=#87ceeb][b][font=Consolas]i[/font]请注意：[/b][/color][/backcolor] HuskHomes API 本身仅支持 Bukkit，但是 Fabric 和 Sponge 支持 API 事件。[/quote]
HuskHomes API 为下列内容提供了方法与类：
[list]
[*]获取、创建和更新多个家（[font=Consolas]Home[font]）和地标（[font=Consolas]Warp[/font]）传送点；
[*]获取 [font=Consolas]SavedUser[/font] 的有关信息；
[*]构建和执行（延时）的传送（[font=Consolas]Teleport[/font]），用于拓展 [font=Consolas]/rtp[/font] 命令的功能；
[*]提供自定义的 [font=Consolas]RandomTeleportEngine[/font]，用于拓展 [font=Consolas]/rtp[/font] 命令的功能。
[/list]
额外地，API 事件还可以修改正在执行的事件。

本章节将会为你大致介绍一些内容。请注意这份文档是[i]不完整的[/i]；如果你想要帮助改进，请联系我们的 Discord 群组。

[size=4][b]建立项目[/b][/size][hr]
[size=3][b]创建一个类用于对接 API[/b][/size]
[list]
[*]除非你的插件以 HuskHomes 为硬依赖，否则你不应该将 HuskHomes API 调用至你的主类中，否则在本插件未安装时，你的插件将会弹出 [font=Consolas]ClassNotFoundException[/font] 报错。
[/list]创建对接类[hr]


确认 HuskHomes 插件存在并实例化联动
[list]
[*]这段代码用来确保你的 HuskHomes 插件在你制作的插件读取 API 之前已经载入。
[/list]实例化联动[hr]

[size=3][b]获取 API 的示例[/b][/size][list]
[*]你现在可以通过调用 [font=Consolas]HuskHomesAPI#getInstance[/font] 来获取 API。
[/list]获取 API 实例[hr]

[size=3][b]CompletableFuture[/b][/size]
HuskHomesAPI 的许多方法都返回浏览异步执行的 [url=https://www.baeldung.com/java-completablefuture]CompletableFutures[/url]，以此确保它们依赖的数据库请求不会堵塞服务器的主线程。当一个计划任务（future）完成执行后，你可以通过 [font=Consolas]#thenAccept()[/font] 方法来接受返回内容。

[quote][backcolor=#282828][color=#ffd700][b]！警告：[/b][/color][/backcolor]你不应该在 HuskHomesAPI 中返回的计划任务（future）上使用 [font=Consolas]#join()[/font] 方法，因为计划任务（future）是基于服务器的异步任务运行的，如果你尝试通过锁定主线程来操作它们的话，很有可能导致线程死锁并使你的服务器崩溃。[/quote]

[size=4][b]获取玩家的家传送点[/b][/size][hr]
若要获取玩家的设置的家传送点列表，你可以调用 API 实例中的 [font=Consolas]#getUserHomes(user)[/font] 方法。这个方法需要一个 [font=Consolas]User[/font] 对象，这个对象可从 UUID 或玩家名称构建，或从在线玩家上使用方法 [font=Consolas]#adaptUser(player)[/font]。这个方法将返回一个 [font=Consolas]CompletableFuture<List<Home>>[/font]，可使用 [font=Consolas]#thenAccept()[/font] 来接受。

请注意所有有关家传送点（[font=Consolas]Home[/font]）的内容也对地标传送点（[font=Consolas]Warp[/font]）有效（例如，使用 [font=Consolas]HuskHomesAPI#getWarps[/font] 来获取所有的地标传送点）。因为地标是公有的，所以获取地标并不需要 [font=Consolas]User[/font] 对象。 

将一个玩家设置的家传送点输出在后台上[hr]

[size=4][b]构建传送[/b][/size][hr]
API 提供了一种方法来获取 [font=Consolas]TeleportBuilder[/font]，可以用于构建 [font=Consolas]Teleport[/font]（携带 [font=Consolas]#toTeleport[/font]）或 [font=Consolas]TimedTeleport[/font]（携带 [font=Consolas]TimedTeleport[/font]；一种要求玩家在原地停留一段时间才可进行传送的方法）。传送可以是跨服的。
构建一个传送[hr]

[size=3]延时传送[/size]

延时传送是需要玩家原地停留一段时间才可进行的传送，所以玩家不会立即在战斗或在危险的时候传送。可通过在 [font=Consolas]TeleportBuilder[/font] 调用 [font=Consolas]#toTimedTeleport()[/font] 方法来取消。玩家所需要停留的预热时间是在配置文本中预先设置的。
构建一个延时传送[hr]
[page]
[size=5][b]API 事件[/b][/size][hr]
HuskHomes 提供了一系列的 API 事件供你的插件监听，用于检测玩家执行了本插件的哪些操作。大多数的事件都可取消，允许你阻止这些事件的进行，如果你想的话。

[size=4][b]API 事件列表[/b][/size]

[table=98%,White]
[tr][td][align=center][b]Bukkit 事件名称[/b][/align][/td][td][align=center][b]添加版本[/b][/align][/td][td][align=center][b]是否可取消[/b][/align][/td][td][align=center][b]描述[/b][/align][/td][/tr]
[tr][td][font=Consolas]HomeCreateEvent[/font][/td][td]4.0[/td][td][align=center]✅[/align][/td][td]当玩家创建一个家传送点时调用[/td][/tr]
[tr][td][font=Consolas]HomeListEvent[/font][/td][td]3.0[/td][td][align=center]✅[/align][/td][td]当玩家请求浏览家/公开家传送点时调用[/td][/tr]
[tr][td][font=Consolas]HomeEditEvent[/font][/td][td]4.0[/td][td][align=center]✅[/align][/td][td]当玩家编辑家传送点（切换公开状态、修改位置、修改描述、修改名称）时调用[/td][/tr]
[tr][td][font=Consolas]HomeDeleteEvent[/font][/td][td]3.0[/td][td][align=center]✅[/align][/td][td]当玩家删除家传送点时调用†[/td][/tr]
[tr][td][font=Consolas]DeleteAllHomesEvent[/font][/td][td]3.2.1[/td][td][align=center]✅[/align][/td][td]当玩家使用命令 [font=Consolas]/delhome all[/font] 来删除他们所有的家传送点时调用[/td][/tr]
[tr][td][font=Consolas]WarpCreateEvent[/font][/td][td]4.0[/td][td][align=center]✅[/align][/td][td]当玩家设置地标传送点时调用[/td][/tr]
[tr][td][font=Consolas]WarpListEvent[/font][/td][td]3.0[/td][td][align=center]✅[/align][/td][td]当玩家列出地标传送点时调用[/td][/tr]
[tr][td][font=Consolas]WarpEditEvent[/font][/td][td]4.0[/td][td][align=center]✅[/align][/td][td]当玩家编辑地标传送点（修改位置、修改描述、修改名称）时调用[/td][/tr]
[tr][td][font=Consolas]WarpDeleteEvent[/font][/td][td]3.0[/td][td][align=center]✅[/align][/td][td]当玩家删除地标传送点时调用†[/td][/tr]
[tr][td][font=Consolas]DeleteAllWarpsEvent[/font][/td][td]3.2.1[/td][td][align=center]✅[/align][/td][td]当玩家使用命令 [font=Consolas]/delwarp all[/font] 来删除所有的地标传送点时调用[/td][/tr]
[tr][td][font=Consolas]SendTeleportRequestEvent[/font][/td][td]4.1[/td][td][align=center]✅[/align][/td][td]当玩家发送传送请求（[font=Consolas]/tpa[/font]）时调用[/td][/tr]
[tr][td][font=Consolas]ReceiveTeleportRequestEvent[/font][/td][td]4.1[/td][td][align=center]✅[/align][/td][td]当玩家收到传送请求时调用[/td][/tr]
[tr][td][font=Consolas]ReplyTeleportRequestEvent[/font][/td][td]4.1[/td][td][align=center]✅[/align][/td][td]当玩家接受或拒绝传送请求时调用[/td][/tr]
[tr][td][font=Consolas]TeleportWarmupEvent[/font][/td][td]3.0[/td][td][align=center]✅[/align][/td][td]当玩家开始传送预热时调用[/td][/tr]
[tr][td][font=Consolas]TeleportEventEvent[/font][/td][td]3.0[/td][td][align=center]✅[/align][/td][td]当玩家被传送后调用‡[/td][/tr]
[tr][td][font=Consolas]TeleportBackEventEvent[/font][/td][td]4.1[/td][td][align=center]✅[/align][/td][td]当玩家被传送回他们的上一个位置（[font=Consolas]/back[/font]）时调用‡[/td][/tr]
[/table]
† 当玩家输入命令 [font=Consolas]/delhome all[/font] 或 [font=Consolas]/delwarp all[/font] 来删除他们所有的家或地标传送点时，只会调用一个 [font=Consolas]DeleteAllHomesEvent[/font] 或 [font=Consolas]DeleteAllWarpsEvent[/font] 事件。
‡ 仅在玩家传送的出发服务器上调用；传送的执行方在此处不重要。

[size=4][b]Sponge 和 Fabric 上的事件[/b][/size]

Sponge，有着和 Bukkit 相似的事件 API，拥有与上述相同的事件，前缀为 [font=Consolas]Sponge[/font]（所以在 Bukkit 上的 HomeCreateEvent 在 Sponge 上为 SpongeHomeCreateEvent。）

Fabric 使用回调来处理事件。HuskHomes 提供了与上述事件相同的回调。例如，为处理玩家创建家传送点的事件，你需要注册一个如下图代码所示的回调：
HuskHomes 和 Fabric 回调[hr][code]HomeCreateCallback.EVENT.register((player, home) -> {
    // Do something with the player and home
    return ActionResult.SUCCESS; // Return an appropriate ActionResult
});.[/code]
[page]

翻译作者：SnowCutieOwO
翻译字数：11749
发布日期：2023/7/22
最后校对：2023/7/22