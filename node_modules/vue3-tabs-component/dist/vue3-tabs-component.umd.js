(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.VueTabs={},r.Vue))})(this,function(r,e){"use strict";const v=Symbol("addTab"),C=Symbol("updateTab"),I=Symbol("deleteTab"),T=Symbol("tabsProvider");function b(i,d){const t=e.inject(i,d);if(typeof t>"u")throw new Error(`Could not resolve ${i.description}`);return t}const D=["data-tab-id","aria-hidden"],w=e.defineComponent({__name:"Tab",props:{panelClass:{default:"tabs-component-panel"},id:{default:void 0},name:null,prefix:{default:""},suffix:{default:""},isDisabled:{type:Boolean,default:!1},navItemClass:{default:void 0},navItemLinkClass:{default:void 0}},setup(i,{expose:d}){const t=i,l=e.ref(!1),n=b(T),h=b(v),f=b(C),m=b(I),s=t.prefix+t.name+t.suffix,o=t.id?t.id:t.name.toLowerCase().replace(/ /g,"-"),a=o+"-pane",c=e.computed(()=>"#"+(t.isDisabled?"":o));return e.watch(()=>n.activeTabHash,()=>{l.value=c.value===n.activeTabHash}),e.watch(()=>Object.assign({},t),()=>{f(o,{name:t.name,header:t.prefix+t.name+t.suffix,isDisabled:t.isDisabled,hash:c.value,index:n.tabs.length,computedId:o,paneId:a,navItemClass:t.navItemClass,navItemLinkClass:t.navItemLinkClass})}),e.onBeforeMount(()=>{h({name:t.name,header:s,isDisabled:t.isDisabled,hash:c.value,index:n.tabs.length,computedId:o,paneId:a,navItemClass:t.navItemClass,navItemLinkClass:t.navItemLinkClass})}),e.onBeforeUnmount(()=>{m(o)}),d({header:s,computedId:o,paneId:a,hash:c,isActive:l}),(u,p)=>e.withDirectives((e.openBlock(),e.createElementBlock("section",{ref:"tab",id:a,"data-tab-id":e.unref(o),"aria-hidden":!l.value,class:e.normalizeClass(i.panelClass),role:"tabpanel",tabindex:"-1"},[e.renderSlot(u.$slots,"default")],10,D)),[[e.vShow,l.value]])}});class L{get(d){const t=localStorage.getItem(d);if(t===null)return null;const l=JSON.parse(t);return l?new Date(l.expires)<new Date?(localStorage.removeItem(d),null):l.value:null}set(d,t,l){const n=new Date().getTime(),h=new Date(n+l*6e4);localStorage.setItem(d,JSON.stringify({value:t,expires:h}))}}const g=new L,x=["id"],y=["aria-controls","aria-selected","href","onClick","innerHTML"],k=e.defineComponent({__name:"Tabs",props:{id:{default:void 0},cacheLifetime:{default:5},options:{default:()=>({useUrlFragment:!0,defaultTabHash:void 0,storageKey:void 0})},wrapperClass:{default:"tabs-component"},panelsWrapperClass:{default:"tabs-component-panels"},navClass:{default:"tabs-component-tabs"},navItemClass:{default:"tabs-component-tab"},navItemDisabledClass:{default:"is-disabled"},navItemActiveClass:{default:"is-active"},navItemInactiveClass:{default:"is-inactive"},navItemLinkClass:{default:"tabs-component-tab-a"},navItemLinkActiveClass:{default:"is-active"},navItemLinkInactiveClass:{default:"is-inactive"},navItemLinkDisabledClass:{default:"is-disabled"}},emits:["changed","clicked"],setup(i,{expose:d,emit:t}){const l=i,n=e.reactive({activeTabHash:"",lastActiveTabHash:"",tabs:[]});e.provide(T,n),e.provide(v,s=>{n.tabs.push(s)}),e.provide(C,(s,o)=>{const a=n.tabs.findIndex(c=>c.computedId===s);o.isActive=n.tabs[a].isActive,n.tabs[a]=o}),e.provide(I,s=>{const o=n.tabs.findIndex(a=>a.computedId===s);n.tabs.splice(o,1)});const h=e.computed(()=>{let s;return l.options.storageKey&&(s=l.options.storageKey),!s&&l.id&&(s=`vue-tabs-component.${l.id}.cache.${window.location.host}${window.location.pathname}`),s||(s=`vue-tabs-component.cache.${window.location.host}${window.location.pathname}`),s}),f=(s,o)=>{o&&!l.options.useUrlFragment&&o.preventDefault();const a=m(s);if(!!a){if(o&&a.isDisabled){o.preventDefault();return}if(n.lastActiveTabHash===a.hash){t("clicked",{tab:a});return}n.tabs.forEach(c=>{c.isActive=c.hash===a.hash}),t("changed",{tab:a}),n.lastActiveTabHash=n.activeTabHash=a.hash,!(l.cacheLifetime<=0)&&g.set(h.value,a.hash,l.cacheLifetime)}},m=s=>n.tabs.find(o=>o.hash===s);return e.onMounted(()=>{if(!!n.tabs.length){if(window.addEventListener("hashchange",()=>f(window.location.hash)),m(window.location.hash)){f(window.location.hash);return}if(l.cacheLifetime>0){const s=g.get(h.value);if(s!==null&&m(s)){f(s);return}}if(l.options.defaultTabHash&&m("#"+l.options.defaultTabHash)){f("#"+l.options.defaultTabHash);return}f(n.tabs[0].hash)}}),d({...e.toRefs(n),selectTab:f,findTab:m}),(s,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(i.wrapperClass),id:i.id},[e.createElementVNode("ul",{role:"tablist",class:e.normalizeClass(i.navClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.tabs,(a,c)=>{var u,p;return e.openBlock(),e.createElementBlock("li",{key:c,class:e.normalizeClass([(u=a.navItemClass)!=null?u:i.navItemClass,a.isDisabled?i.navItemDisabledClass:"",a.isActive?i.navItemActiveClass:a.isDisabled?"":i.navItemInactiveClass]),role:"presentation"},[e.createElementVNode("a",{role:"tab",class:e.normalizeClass([(p=a.navItemLinkClass)!=null?p:i.navItemLinkClass,a.isDisabled?i.navItemLinkDisabledClass:"",a.isActive?i.navItemLinkActiveClass:a.isDisabled?"":i.navItemLinkInactiveClass]),"aria-controls":a.paneId,"aria-selected":a.isActive,href:a.hash,onClick:A=>f(a.hash,A),innerHTML:a.header,tabindex:"0"},null,10,y)],2)}),128))],2),e.createElementVNode("div",{class:e.normalizeClass(i.panelsWrapperClass)},[e.renderSlot(s.$slots,"default")],2)],10,x))}}),S={install(i){i.component("tab",w),i.component("tabs",k)}};r.Tab=w,r.Tabs=k,r.default=S,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
