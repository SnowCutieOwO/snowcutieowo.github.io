# SQL

指导搭建与配置 SQL 数据库的教程。

在 `config.yml` 下的 `sql` 设置允许插件将玩家数据存储在数据库而非 YAML 文件中。目前仅支持 MySQL（和 MariaDB）。通过 SQL 存储数据能够在较多玩家的情况下有更好的性能表现，且允许多服同步数据，并使得第三方代码能更好地与数据交互。

## 基础搭建

在着手修改 AuraSkills 配置钱，必须单独准备一个 SQL 数据库（通过服务器面板或中断）。数据库应当包含域名（通常为 IP 地址）、数据库名称、端口号、用户名及密码。

配置 SQL 的选项位于 `config.yml` 下的 `sql` 部分。若要启用 SLQ，只需将 `enabled` 设置为 true 即可。在 `host`、`port` 和 `database` 下分别填入域名、端口号及数据库名称。之后，在对应部分下填写用户名和密码。若需要还可在 `ssl` 处设置启用 SSL。

启动后，SQL 即可正常工作。AuraSkills 会在数据库内自动创建数据表。若 SQL 未能正常工作，请检查启动时是否出现报错，并再次检查数据库凭证是否填写正确。

## 从 YAML 迁移数据

单独启用 SQL 不会将玩家的数据从默认的 YAML 存储方法中迁移。若要迁移数据，你需要按如下步骤操作：

1. 处于 YAML 模式时，通过 `/skills backup save` 保存数据备份。
2. 关闭服务器。
3. 按“基础搭建”部分所讲建立数据库并切换存储类型（请确保修改后重启）。
4. 输入命令 `/skills backup load [文件名称]`，`文件名称` 即为先前保存的备份文件名称（可在 `backup` 文件夹下找到）。